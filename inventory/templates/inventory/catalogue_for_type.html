{% extends 'core/base.html' %}
{% load static %}
{% load paginator %}

{% block title %}
    Squire - Boardgames
{% endblock title %}

{% block content-frame-class %}
    container
{% endblock %}


{% block content %}
    <h1>Item catalogue for {{ item_type }}</h1>

    {% if can_add_to_member %}
        <a href="{% url "inventory:catalogue_add_new_item" type_id=item_type.id %}"
           class="btn btn-sm btn-primary">
            Add new {{ item_type }}
        </a>
    {% endif %}
    {% include "utils/snippets/filter_form_snippet.html" with form=filter_form %}

    <table class="table table-striped table-hover">
        <thead>
        <tr class="">
            <th scope="col">Name</th>
            {% if can_change_items %}<th></th>{% endif %}
            <th scope="col">Description</th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        {% for item in object_list %}
            <tr class="">
                <td>
                    {% if item.image %}
                        <a class="enlargable_image">
                            <img style="height: 2em;" src={{ item.image.url }}>
                        </a>
                    {% endif %}
                    {{ item.name }}

                </td>
                {% if can_change_items %}
                    <td>
                        <a href="{% url "inventory:catalogue_update_item" type_id=item_type.id item_id=item.id %}"
                           class="btn btn-sm btn-primary">
                            Edit
                        </a>
                    </td>
                {% endif %}
                <td class="w-50">
                    {{ item.description }}
                </td>
                <td>
                    <div class="d-lg-flex justify-content-end">
                        {% if can_add_to_group %}
                            <a href="{% url "inventory:catalogue_add_group_link" type_id=item_type.id item_id=item.id %}"
                               class="btn btn-sm btn-primary mb-2 mb-lg-0">
                                Add to committee
                            </a>
                        {% endif %}
                        {% if can_add_to_member %}
                            <a href="{% url "inventory:catalogue_add_member_link" type_id=item_type.id item_id=item.id %}"
                               class="btn btn-sm btn-secondary">
                                Add to member
                        </a>
                        {% endif %}
                    </div>
                </td>
            </tr>
        {% empty %}
            <tr>
                <td colspan="2">There are no results for this query</td>
            </tr>
        {% endfor %}

        </tbody>
    </table>

    {% render_paginator %}

    {% include "inventory/snippets/snippet_enlarged_image_modal.html" %}

{% endblock %}


{% block js_bottom %}
    {{ block.super }}
    <script src="{% static "js/enlarge_item_image.js" %}"></script>
{% endblock %}
